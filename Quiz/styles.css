:root{
  --blue-600:#0074D9;
  --blue-700:#0063b8;
  --blue-300:#7FDBFF;
  --blue-500:#2795ff;
  --blue-800:#003b73;
  --navy:#001f3f;
  --gray-900:#111111;
  --gray-700:#2a2f36;
  --gray-500:#AAAAAA;
  --gray-300:#DDDDDD;
  --white:#FFFFFF;

  --bg:#0e1622;
  --surface:#141c28;
  --text:#eaf1ff;
  --muted:#b7c2d6;

  --radius:14px;
  --radius-sm:10px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
  --shadow-sm:0 6px 18px rgba(0,0,0,.25);
  --focus:0 0 0 3px rgba(127,219,255,.35);
  --transition:220ms cubic-bezier(.2,.7,.2,1);
  --aura:rgba(39,149,255,.25);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
  background: transparent;
  color:#eaf3ff;
  line-height:1.5;
}

.container{
  width:min(1100px, 92%);
  margin-inline:auto;
  padding:32px 0;
  padding-top:34px;
}

.container--center{
  display:grid;
  place-items:center;
  min-height:calc(100dvh - 120px);
}

/* Fundo gradiente animado + noise */
.bg-animated{
  position:fixed; inset:0; z-index:-2;
  background:
    radial-gradient(1200px 800px at 80% -10%, rgba(0,116,217,.18), transparent 60%),
    radial-gradient(900px 600px at 10% 110%, rgba(0,31,63,.30), transparent 55%),
    linear-gradient(135deg, #071120 0%, #0b1a2c 35%, #0e1622 60%, #0a1a2a 100%);
  animation: gradientFloat 18s ease-in-out infinite alternate;
}
@keyframes gradientFloat{
  0%{ filter:hue-rotate(0deg) saturate(1); transform:translate3d(0,0,0); }
  100%{ filter:hue-rotate(-6deg) saturate(1.05); transform:translate3d(0,-10px,0); }
}
.bg-noise{
  position:fixed; inset:0; z-index:-1; opacity:.04; pointer-events:none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  mix-blend-mode: soft-light;
}

/* Topbar separada do body */
.topbar{
  position:sticky;top:0;z-index:50;
  background:rgba(14,22,34,.85);
  backdrop-filter:saturate(150%) blur(10px);
  border-bottom:1px solid rgba(127,219,255,.16);
  box-shadow: 0 10px 24px rgba(0,0,0,.35), 0 1px 0 rgba(39,149,255,.12) inset;
}
.topbar .container{
  display:flex;align-items:center;justify-content:space-between;gap:16px;
  padding:14px 0;
}
.topbar.scrolled{
  box-shadow: 0 14px 30px rgba(0,0,0,.45), 0 1px 0 rgba(39,149,255,.18) inset;
  border-color: rgba(127,219,255,.22);
}

/* Marca */
.brand{
  margin:0;
  font-size:20px;
  letter-spacing:.5px;
  color:var(--blue-300);
}
.actions{display:flex;gap:8px}

/* Telas */
.screen{display:none;opacity:0;transform:translateY(8px);transition:opacity var(--transition), transform var(--transition)}
.screen.active{display:block;opacity:1;transform:translateY(0)}

/* Cards */
.card{
  position:relative; isolation:isolate;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border:1px solid rgba(127,219,255,.16);
  box-shadow:var(--shadow);
  border-radius:var(--radius);
  padding:28px;
}
.card:before{
  content:""; position:absolute; inset:-1px; z-index:-1; border-radius:inherit;
  background: linear-gradient(180deg, rgba(39,149,255,.22), rgba(39,149,255,0));
  mask: linear-gradient(#000,#000) content-box, linear-gradient(#000,#000);
  -webkit-mask-composite: xor; mask-composite: exclude;
  padding:1px; border-radius:inherit;
}
.card--hero{max-width:720px;text-align:center;justify-self:center}
.card--question{margin-top:16px}
.card--result{max-width:640px;text-align:center}

/* Home layout: centralizado inicialmente; vira 2 colunas se houver histórico */
.home-layout{
  display:grid; gap:16px; align-items:start;
  grid-template-columns: 1fr;
  justify-items:center;
}
.home-layout.with-history{
  grid-template-columns: 1fr 380px;
  justify-items:stretch;
}

/* Histórico */
#history-card[hidden]{ display:none !important; }
.card--history{ min-height: 220px; }
.card--history h3{ margin:0 0 8px; font-size: clamp(18px,2.5vw,22px); }
.history-list{ list-style:none; padding:0; margin: 6px 0 0; display:grid; gap:10px; }
.history-item{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 14px; border-radius:12px;
  background: linear-gradient(180deg, rgba(0,31,63,.45), rgba(0,31,63,.28));
  border:1px solid rgba(127,219,255,.18);
  color:#eaf3ff;
}
.history-left{ display:flex; flex-direction:column; gap:4px; }
.history-cat{ font-weight:600; color:#e9f3ff; }
.history-meta{ color:#c7d6ec; font-size:.92rem; }
.history-right{ font-weight:700; color:#bfe6ff; }

/* Tipografia e contraste */
h2{
  margin:0 0 10px;
  font-size: clamp(24px, 3.5vw, 36px);
}
.title-contrast{ color:#f4f9ff; text-shadow:0 1px 0 rgba(0,0,0,.25); }
.subtitle{
  margin:0 0 22px;
  color:#c4d3ea;
}

/* Botões */
.btn{
  --btn-bg:#223047;
  --btn-fg:#e8f2ff;
  --btn-bd:rgba(255,255,255,.12);
  appearance:none;border:1px solid var(--btn-bd);
  background:var(--btn-bg); color:var(--btn-fg);
  padding:12px 18px;border-radius:12px;
  font-weight:600;letter-spacing:.2px;
  transition:transform var(--transition), box-shadow var(--transition), background var(--transition), border-color var(--transition), color var(--transition);
  cursor:pointer; box-shadow: var(--shadow-sm);
}
.btn:hover{transform:translateY(-1px); box-shadow: 0 8px 24px rgba(39,149,255,.18);}
.btn:active{transform:translateY(0)}
.btn:focus-visible{outline:none;box-shadow:var(--focus)}
.btn.primary{
  --btn-bg:linear-gradient(180deg, var(--blue-600), var(--blue-700));
  --btn-fg:#fff;
  --btn-bd:rgba(0,116,217,.35);
  position:relative;
  box-shadow: 0 12px 28px rgba(39,149,255,.25);
}
.btn.primary:after{
  content:""; position:absolute; inset:-2px; border-radius:inherit;
  background: radial-gradient(120px 50px at 50% 120%, rgba(39,149,255,.25), transparent 60%);
  pointer-events:none;
}
.btn.ghost{
  --btn-bg:transparent;
  --btn-fg:var(--text);
  --btn-bd:rgba(255,255,255,.18);
}

/* Grade de categorias (tela secundária) */
.grid--categories{
  margin-top:18px;
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:14px;
}
.category{
  display:flex;align-items:center;justify-content:space-between;
  padding:18px;border-radius:var(--radius-sm);
  background:linear-gradient(180deg, rgba(0,31,63,.55), rgba(0,31,63,.35));
  border:1px solid rgba(127,219,255,.18);
  transition:transform var(--transition), border-color var(--transition), background var(--transition), box-shadow var(--transition);
}
.category:hover{transform:translateY(-2px);border-color:rgba(127,219,255,.45); box-shadow: 0 10px 26px rgba(39,149,255,.16);}
.category .name{font-weight:600; color:#e9f3ff}
.category .count{opacity:.85;font-size:.9rem; color:#c7d6ec}

/* Header do quiz e timer circular */
.quiz-header{
  display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;
}
.quiz-title-wrap{ display:flex; align-items:center; gap:14px; }
.timer{
  position:relative; width:44px; height:44px;
  display:grid; place-items:center;
  filter: drop-shadow(0 2px 8px rgba(39,149,255,.22));
}
.timer-svg{ width:44px; height:44px; transform: rotate(-90deg); }
.timer-bg{
  fill: none;
  stroke: rgba(191,230,255,.18);
  stroke-width: 8;
}
.timer-progress{
  fill: none;
  stroke: #2795ff;
  stroke-width: 8;
  stroke-linecap: round;
  stroke-dasharray: 339.292; /* 2 * PI * r (r=54) */
  stroke-dashoffset: 0;
  transition: stroke-dashoffset 300ms linear, stroke 200ms ease;
}
.timer-label{
  position:absolute; inset:0; display:grid; place-items:center;
  font-size:.8rem; color:#eaf3ff;
}
.timer.warn .timer-progress{ stroke:#ffb020; }
.timer.danger .timer-progress{ stroke:#ff4136; }

/* Meta */
.tag{
  display:inline-block;
  padding:6px 10px;border-radius:999px;
  background:rgba(0,116,217,.18); color:#bfe6ff;
  border:1px solid rgba(0,116,217,.35);
  font-weight:600;
}
.progress,.score{color:#c7d6ec}

/* Pergunta e respostas */
.question{
  font-size: clamp(18px, 2.5vw, 22px);
  margin-bottom:14px;
  color:#f0f6ff;
}
.answers{
  list-style:none;margin:0;padding:0;display:grid;gap:10px;
}
.answer{
  display:flex;align-items:center;justify-content:space-between;gap:12px;
  padding:14px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.02);
  color:#eaf3ff;
  cursor:pointer;transition:background var(--transition), transform var(--transition), border-color var(--transition), box-shadow var(--transition);
}
.answer:hover{transform:translateY(-1px);background:rgba(255,255,255,.05); box-shadow: 0 8px 18px rgba(0,0,0,.22);}
.answer:focus-visible{outline:none;box-shadow:var(--focus)}
.answer[aria-selected="true"]{border-color:rgba(127,219,255,.45)}
.answer.correct{background:rgba(0,167,95,.22); border-color:rgba(0,167,95,.55); color:#f4fffb}
.answer.wrong{background:rgba(255,65,54,.22); border-color:rgba(255,65,54,.55); color:#fff1f1}

.feedback{
  min-height:28px;
  margin:8px 2px 10px;
  color:#c4d3ea;
  transition:opacity var(--transition);
}

/* Overlay com fundo de modal e mensagens mais próximas */
.overlay-result{
  position: fixed; inset:0; display:none; place-items:center; z-index:60;
  pointer-events:none;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(2px);
}
.overlay-result.active{ display:grid; }
.overlay-burst{
  margin-bottom:2px;
  font-weight:800; font-size: clamp(36px, 6vw, 64px);
  color:#eafff5; text-shadow: 0 6px 26px rgba(0,167,95,.45);
  animation: burst 1200ms cubic-bezier(.2,.7,.2,1) both;
}
.overlay-points{
  margin-top:0;
  font-weight:700; font-size: clamp(16px, 2.2vw, 22px);
  color:#d8ffee; text-shadow: 0 4px 18px rgba(0,167,95,.45);
  animation: pointsUp 1400ms cubic-bezier(.2,.7,.2,1) both;
}
@keyframes burst{
  0%{ transform: scale(.85); opacity:0; filter: blur(2px); }
  60%{ transform: scale(1.05); opacity:1; filter: blur(0); }
  100%{ transform: scale(1); }
}
@keyframes pointsUp{
  0%{ transform: translateY(10px); opacity:0; }
  60%{ transform: translateY(-2px); opacity:1; }
  100%{ transform: translateY(0); }
}

.footer-actions{display:flex;gap:10px;justify-content:flex-end;margin-top:12px}

/* Rodapé */
.site-footer{
  border-top:1px solid rgba(255,255,255,.06);
  margin-top:40px;
  color:#c4d3ea;
}
.site-footer p{margin:0;padding:20px 0;text-align:center}

/* Hero menu (card inicial) */
.hero-categories{
  display:grid; gap:12px; margin:18px 0 22px; padding:0; list-style:none;
  grid-template-columns: repeat(2, minmax(0,1fr));
}
.hero-cat{
  display:flex; align-items:center; gap:12px;
  background: linear-gradient(180deg, rgba(0,31,63,.55), rgba(0,31,63,.35));
  border:1px solid rgba(127,219,255,.22);
  border-radius:12px; padding:12px 14px; cursor:pointer;
  transition: transform var(--transition), border-color var(--transition), background var(--transition), box-shadow var(--transition);
}
.hero-cat:hover{
  transform: translateY(-2px);
  border-color: rgba(127,219,255,.45);
  box-shadow: 0 10px 24px rgba(39,149,255,.20);
}
.hero-icon{ font-size:22px; filter: drop-shadow(0 3px 6px rgba(39,149,255,.28)); }
.hero-name{ color:#e9f3ff; font-weight:600; letter-spacing:.2px; }

/* Animação drop-in */
@keyframes dropIn {
  0%{ transform: translateY(-18px) scale(.98); opacity:0; filter:blur(2px); }
  60%{ transform: translateY(2px) scale(1.005); opacity:1; filter:blur(0); }
  100%{ transform: translateY(0) scale(1); }
}
.drop-in{ animation: dropIn 700ms cubic-bezier(.2,.7,.2,1) both; }

/* AOS custom opcional */
[data-aos="drop-in"]{ opacity:0; transform: translateY(-18px) scale(.98); }
[data-aos="drop-in"].aos-animate{ opacity:1; transform: translateY(0) scale(1); transition: transform 700ms cubic-bezier(.2,.7,.2,1), opacity 700ms; }

/* Responsividade e preferências */
@media (max-width: 900px){
  .grid--categories{grid-template-columns:repeat(2,minmax(0,1fr))}
}
@media (max-width: 560px){
  .grid--categories{grid-template-columns:1fr}
  .btn{width:100%}
  .hero-categories{ grid-template-columns:1fr; }
}
/* Preferência de movimento reduzido */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: .001ms !important; scroll-behavior: auto !important; }
}
@media (max-width: 360px){
  .quiz-title-wrap{ gap:10px; }
  .timer{ width:40px; height:40px; }
  .timer-svg{ width:40px; height:40px; }
  .overlay-burst{ font-size: 32px; }
}
/* Foco visível */
:focus-visible{
  outline: 2px dashed rgba(127,219,255,.85);
  outline-offset: 3px;
}
